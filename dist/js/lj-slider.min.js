/**
 * LjSlider v1.1
 * Licensed under the terms of the MIT license.
 * 
 * By Marson Lj @idjitjohn
 * https://idjitjohn.github.io/portfolio
 */function LjSlider(t){this.getValues=function(){return this.values},this.setValues=function(t){if(!Array.isArray(t))return this.setValues([t]);var e=Array.from(this.params.elt.querySelectorAll(".pin"));for(let a=0;a<t.length&&e[a];a++){var s=this.steps.values.indexOf(t[a]);s>=0&&(e[a].style.left=this.steps.steps[s]+"%",e[a].dataset.val=t[a],this.change())}},this.getParams=function(t){var e={elt:null,sameStep:!0,start:0,pins:1,handler:console.log,link:!0,steps:[{step:1,number:10}],values:[]};for(key in t)e[key]=t[key];return e},this.init=function(t){var e=this.getParams(t);if(this.checkErrors(e)){this.createPins(e),this.createLinks(e),this.params=this.addEvents(e),this.values=[];for(let t=0;t<e.pins;t++)this.values.push(this.params.start);var s=this.params.values;!Array.isArray(s)||s.length>0?this.setValues(s):(s=this.params.elt.dataset.val)&&(this.setValues(JSON.parse("["+this.params.elt.dataset.val+"]")),this.params.elt.removeAttribute("data-val"))}},this.change=function(){var t=this.params,e=Array.from(t.elt.querySelectorAll(".pin")).map(function(e){return{pin:e,val:e.dataset.val?parseFloat(e.dataset.val):t.start,x:e.style.left?parseFloat(e.style.left):0}}).sort(function(t,e){return t.val<e.val?-1:1});if(this.values=e.map(function(t){return t.val}),t.link){var s=t.pins%2,a;if(s)(a=t.elt.querySelector(".diff")).style.left="0",a.style.width=e[0].x+"%";for(let r=s;r<Math.ceil(t.pins/2);r++){var a;(a=t.elt.querySelectorAll(".diff")[r+s]).style.left=e[2*r+s].x+"%",a.style.width=e[2*r+1+s].x-e[2*r+s].x+"%"}}t.handler(e.map(function(t){return t.val}))},this.checkErrors=function(t){return t.elt.classList?(t.elt.classList.add("lj-slider"),!(t.pins<=0)||console.error("The passed `pins` value is not valid ")):console.error("The passed elt parameter must be a DOMElemnt")},this.createPins=function(t){for(let s=0;s<t.pins;s++){var e=document.createElement("div");e.classList.add("pin"),e.setAttribute("draggable","true"),t.elt.appendChild(e)}},this.createLinks=function(t){if(t.link)for(let s=0;s<Math.ceil(t.pins/2);s++){var e=document.createElement("div");e.classList.add("diff"),t.elt.appendChild(e)}},this.getMinStep=function(t){return t.steps.reduce(function(t,e){return e.step<t?e.step:t},t.steps[0].step)},this.getSteps=function(t){var e=this.getMinStep(t);t.steps=t.steps.map(function(s){return s.multiply=t.sameStep?1:s.step/e,s});var s=100/t.steps.reduce(function(t,e){return t+e.number*e.multiply},0),a=[0],r=[t.start];return t.steps.reduce(function(t,e){var i=t[1];t=t[0];for(let n=1;n<=e.number;n++)a.push(t+s*e.multiply*n),r.push(i+e.step*n);return[t+=s*e.multiply*e.number,i+=e.step*e.number]},[0,t.start]),{steps:a,values:r}},this.addEvents=function(t){var e=this.steps=this.getSteps(t),s=this,a=e.values;return e=e.steps,t.elt.querySelectorAll(".pin").forEach(function(r){r.addEventListener("dragstart",function(t){t.dataTransfer.setDragImage(document.createElement("div"),0,0)},!1),r.addEventListener("drag",function(r){if(0!==r.y){for(var i=t.start,n=parseInt(getComputedStyle(r.target.parentNode).width),l=0,u=r.target.parentNode;u;)l+=u.offsetLeft,u=u.offsetParent;var p=r.clientX-l;p>n?p=n:p<0&&(p=0),p=100*p/n;for(var o=0;o<e.length;o++)if(e[o+1]>=p){e[o]<p&&(Math.abs(p-e[o])<Math.abs(p-e[o+1])?(p=e[o],i=a[o]):(p=e[o+1],i=a[o+1]));break}parseFloat(r.target.dataset.val)!=i&&(r.target.style.left=p+"%",r.target.dataset.val=i,s.change())}},!1)}),t},this.init(t)}